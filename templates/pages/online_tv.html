{% extends 'base.html' %}
{% load static %}
{% load page_images %}

{% block title %}Watch Online - {{ site_settings.church_name }}{% endblock %}
{% block meta_description %}Watch our live services and archived sermons online. Join us for worship from anywhere in the world.{% endblock %}

{% block content %}
<!-- Ultra-Modern Hero Section -->
<section class="relative min-h-[40vh] flex items-center justify-center overflow-hidden py-12">
    <!-- Background Image -->
    <div class="absolute inset-0 z-0">
        <img src="{% get_page_image_url "online_tv_hero" 0 "https://images.unsplash.com/photo-1516975080664-ed2fc6a32937?ixlib=rb-4.0.3&auto=format&fit=crop&w=2070&q=80" %}"
             alt="Online TV Background" class="w-full h-full object-cover">
        <!-- Spiritual Gradient Overlays -->
        <div class="absolute inset-0 bg-gradient-to-br from-blue-900/95 via-blue-800/90 to-blue-600/85"></div>
        <div class="absolute inset-0 bg-gradient-to-t from-red-500/20 via-transparent to-transparent"></div>
    </div>

    <!-- Floating Background Elements -->
    <div class="absolute inset-0 z-10">
        <div class="absolute top-10 right-10 w-40 h-40 bg-red-500/20 rounded-full blur-3xl animate-pulse"></div>
        <div class="absolute bottom-16 left-10 w-56 h-56 bg-amber-400/10 rounded-full blur-3xl animate-pulse delay-1000"></div>
        <div class="absolute top-1/2 left-1/4 w-24 h-24 bg-white/5 rounded-full blur-2xl animate-pulse delay-500"></div>
    </div>

    <!-- Main Content -->
    <div class="relative z-20 max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
        <!-- Live Icon -->
        <div class="inline-flex items-center justify-center w-20 h-20 bg-gradient-to-br from-red-500/20 to-red-600/20 backdrop-blur-sm rounded-full border border-red-400/30 mb-8">
            <svg class="w-10 h-10 text-red-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"></path>
            </svg>
        </div>

        <!-- Main Heading -->
        <h1 class="text-3xl sm:text-4xl lg:text-5xl font-bold mb-4">
            <span class="bg-gradient-to-r from-white via-blue-100 to-red-200 bg-clip-text text-transparent">
                Watch
            </span>
            <br>
            <span class="bg-gradient-to-r from-red-400 via-red-500 to-red-600 bg-clip-text text-transparent">
                Live
            </span>
            <span class="text-white"> Online</span>
        </h1>

        <!-- Subtitle -->
        <p class="text-lg sm:text-xl lg:text-2xl text-blue-100 mb-8 max-w-4xl mx-auto leading-relaxed">
            Join us for worship services, special events, and archived sermons from anywhere in the world.
        </p>

        <!-- CTA Buttons -->
        <div class="flex flex-col sm:flex-row gap-4 justify-center">
            <a href="#live-stream" class="group inline-flex items-center bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 text-white px-8 py-4 rounded-2xl font-semibold text-lg transition-all duration-300 transform hover:scale-105 shadow-xl hover:shadow-2xl">
                <svg class="w-6 h-6 mr-3 group-hover:animate-pulse" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"></path>
                </svg>
                Watch Live Now
                <div class="ml-2 w-2 h-2 bg-red-300 rounded-full animate-pulse"></div>
            </a>
            <a href="#archived-services" class="group inline-flex items-center bg-white/10 backdrop-blur-sm border-2 border-white/30 text-white hover:bg-white hover:text-gray-900 px-8 py-4 rounded-2xl font-semibold text-lg transition-all duration-300 transform hover:scale-105">
                <svg class="w-6 h-6 mr-3 group-hover:text-blue-600 transition-colors" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path>
                </svg>
                View Archives
            </a>
        </div>
    </div>

    <!-- Scroll Indicator -->
    <div class="absolute bottom-8 left-1/2 transform -translate-x-1/2 animate-bounce z-20">
        <svg class="w-6 h-6 text-white/70" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3"></path>
        </svg>
    </div>
</section>

<!-- Ultra-Modern Live Stream Section -->
<section id="live-stream" class="py-12 lg:py-16 bg-gradient-to-br from-white via-blue-50/30 to-gray-50">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <!-- Section Header -->
        <div class="text-center mb-10 lg:mb-12">
            <!-- Badge -->
            <div class="inline-flex items-center bg-red-100 text-red-800 rounded-full px-6 py-3 mb-6">
                <div class="w-2 h-2 bg-red-500 rounded-full animate-pulse mr-2"></div>
                <span class="font-semibold">Live Streaming</span>
            </div>

            <!-- Main Heading -->
            <h2 class="text-3xl sm:text-4xl lg:text-5xl font-bold mb-4">
                <span class="bg-gradient-to-r from-blue-900 via-blue-700 to-blue-600 bg-clip-text text-transparent">
                    Live
                </span>
                <br>
                <span class="text-gray-900">Stream</span>
            </h2>

            <!-- Subtitle -->
            <p class="text-lg sm:text-xl text-gray-600 max-w-3xl mx-auto leading-relaxed">
                Join us live for our worship services. Services are streamed every Saturday and for special events.
            </p>
        </div>

        <div class="space-y-8 lg:space-y-10">
            <!-- Main Stream Player (prioritized full width) -->
            <div class="group bg-white/80 backdrop-blur-sm rounded-3xl overflow-hidden shadow-2xl hover:shadow-3xl transition-all duration-500 border border-gray-100/50">
                {% if embed_url %}
                <div id="livePlayer" class="relative aspect-video bg-black">
                    <iframe src="{{ embed_url }}" title="Live Stream Player" class="absolute inset-0 w-full h-full"
                            allow="autoplay; fullscreen; picture-in-picture" allowfullscreen loading="lazy"></iframe>
                    <button id="fullscreenBtn" type="button" aria-label="Enter fullscreen"
                            class="absolute top-3 right-3 z-20 inline-flex items-center gap-2 px-3 py-2 rounded-lg bg-black/60 text-white hover:bg-black/80 focus:outline-none focus:ring-2 focus:ring-white/70">
                        <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20" aria-hidden="true">
                            <path d="M3 8V4a1 1 0 011-1h4a1 1 0 110 2H6.414L9 7.586A2 2 0 016.586 10L4 7.414V8a1 1 0 11-2 0zm14 4v4a1 1 0 01-1 1h-4a1 1 0 110-2h1.586L11 12.414A2 2 0 0113.414 10L16 12.586V12a1 1 0 112 0z"/>
                        </svg>
                        <span class="hidden sm:inline">Fullscreen</span>
                    </button>
                </div>
                {% else %}
                <div class="aspect-video bg-gradient-to-br from-gray-900 via-gray-800 to-blue-900 flex items-center justify-center relative overflow-hidden">
                    <!-- Background Pattern -->
                    <div class="absolute inset-0 opacity-10">
                        <div class="absolute top-10 right-10 w-32 h-32 bg-white rounded-full blur-2xl"></div>
                        <div class="absolute bottom-10 left-10 w-24 h-24 bg-red-500 rounded-full blur-xl"></div>
                    </div>
                    <div class="relative text-center text-white z-10">
                        <div class="w-20 h-20 bg-gradient-to-br from-red-500 to-red-600 rounded-2xl flex items-center justify-center mx-auto mb-6 group-hover:scale-110 transition-transform duration-300">
                            <svg class="w-10 h-10 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"></path>
                            </svg>
                        </div>
                        <h3 class="text-2xl font-bold mb-3">Live Stream</h3>
                        <p class="text-blue-200 mb-4">Service starts Saturday at 9:00 AM</p>
                        <div class="text-sm text-blue-300 mb-6">
                            <p>Stream will appear here when live</p>
                            <p class="mt-2">Or watch on our YouTube channel</p>
                        </div>
                        <div class="inline-flex items-center bg-red-500/20 backdrop-blur-sm border border-red-400/30 rounded-full px-4 py-2">
                            <div class="w-3 h-3 bg-red-400 rounded-full animate-pulse mr-2"></div>
                            <span class="text-sm font-semibold text-red-300">OFFLINE</span>
                        </div>
                    </div>
                </div>
                {% endif %}
                <div class="p-6 sm:p-8 bg-gradient-to-r from-blue-50 to-blue-100/50">
                    <h3 class="text-xl sm:text-2xl font-bold text-gray-900 mb-2">Sabbath Worship Service</h3>
                    <p class="text-gray-600">Join us for worship, prayer, and the Word of God.</p>
                </div>
            </div>

            <!-- Optional Info Cards stacked below -->
            <div class="grid lg:grid-cols-3 gap-6">
                <div class="bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-xl border border-blue-100/50">
                    <div class="flex items-center mb-4">
                        <div class="w-10 h-10 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center mr-3">
                            <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                        <h3 class="text-xl font-bold text-gray-900">Service Times</h3>
                    </div>
                    <div class="space-y-3 text-sm">
                        <div class="flex justify-between items-center p-3 bg-blue-50 rounded-xl"><span class="font-semibold text-gray-900">Sabbath Worship</span><span class="font-bold text-blue-600">9:00 AM - 11:00 AM</span></div>
                        <div class="flex justify-between items-center p-3 bg-blue-50 rounded-xl"><span class="font-semibold text-gray-900">Wednesday Bible Study</span><span class="font-bold text-blue-600">7:00 PM - 8:30 PM</span></div>
                    </div>
                </div>
                <div class="bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-xl border border-gray-100/50">
                    <div class="flex items-center mb-4">
                        <div class="w-3 h-3 bg-gray-400 rounded-full mr-3 animate-pulse"></div>
                        <h3 class="text-xl font-bold text-gray-900">Currently Offline</h3>
                    </div>
                    <p class="text-gray-600">Next service starts: Saturday 9:00 AM</p>
                </div>
                <div class="bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-xl border border-amber-100/50">
                    <div class="flex items-center mb-4">
                        <div class="w-10 h-10 bg-gradient-to-br from-amber-500 to-amber-600 rounded-xl flex items-center justify-center mr-3">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 24 24"><path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814z"/></svg>
                        </div>
                        <h3 class="text-xl font-bold text-gray-900">Watch on Social</h3>
                    </div>
                    <div class="space-y-3">
                        <a href="#" class="inline-flex items-center px-4 py-2 rounded-xl bg-gradient-to-r from-red-500 to-red-600 text-white">YouTube Live</a>
                        <a href="#" class="inline-flex items-center px-4 py-2 rounded-xl bg-gradient-to-r from-blue-500 to-blue-600 text-white">Facebook Live</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Ultra-Modern Archived Services Section -->
<section id="archived-services" class="py-20 lg:py-28 bg-gradient-to-br from-gray-50 via-blue-50/20 to-white">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <!-- Section Header -->
        <div class="text-center mb-16 lg:mb-20">
            <!-- Badge -->
            <div class="inline-flex items-center bg-blue-100 text-blue-800 rounded-full px-6 py-3 mb-6">
                <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path>
                </svg>
                <span class="font-semibold">Archived Services</span>
            </div>

            <!-- Main Heading -->
            <h2 class="text-4xl sm:text-5xl lg:text-6xl font-bold mb-6">
                <span class="bg-gradient-to-r from-blue-900 via-blue-700 to-blue-600 bg-clip-text text-transparent">
                    Catch Up
                </span>
                <br>
                <span class="text-gray-900">On Recent Services</span>
            </h2>

            <!-- Subtitle -->
            <p class="text-xl sm:text-2xl text-gray-600 max-w-3xl mx-auto leading-relaxed">
                Catch up on recent services and sermons you may have missed.
            </p>
        </div>
        <!-- Simplified CTA only (removed hardcoded archive cards) -->
        <div class="text-center mt-8">
            <a href="{% url 'sermons:list' %}" class="inline-flex items-center bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white px-8 py-3 rounded-2xl font-semibold text-lg transition-all duration-300 transform hover:scale-105 shadow-xl hover:shadow-2xl">
                <svg class="w-6 h-6 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path>
                </svg>
                View All Sermons
            </a>
        </div>
    </div>
</section>

<!-- Ultra-Modern Call to Action -->
<section class="relative py-20 lg:py-28 overflow-hidden">
    <!-- Background Image -->
    <div class="absolute inset-0 z-0">
        <img src="{% get_page_image_url "cta_background" 0 "https://images.unsplash.com/photo-1438032005730-c779502df39b?ixlib=rb-4.0.3&auto=format&fit=crop&w=2070&q=80" %}"
             alt="Church Community Background" class="w-full h-full object-cover">
        <!-- Spiritual Gradient Overlays -->
        <div class="absolute inset-0 bg-gradient-to-br from-blue-900/95 via-blue-800/90 to-blue-600/85"></div>
        <div class="absolute inset-0 bg-gradient-to-t from-amber-400/20 via-transparent to-transparent"></div>
    </div>

    <!-- Floating Background Elements -->
    <div class="absolute inset-0 z-10">
        <div class="absolute top-20 right-20 w-64 h-64 bg-white/5 rounded-full blur-3xl animate-pulse"></div>
        <div class="absolute bottom-32 left-16 w-80 h-80 bg-amber-400/10 rounded-full blur-3xl animate-pulse delay-1000"></div>
        <div class="absolute top-1/2 left-1/4 w-32 h-32 bg-blue-400/10 rounded-full blur-2xl animate-pulse delay-500"></div>
    </div>

    <!-- Main Content -->
    <div class="relative z-20 max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
        <!-- Icon -->
        <div class="inline-flex items-center justify-center w-20 h-20 bg-gradient-to-br from-amber-400/20 to-amber-500/20 backdrop-blur-sm rounded-full border border-amber-400/30 mb-8">
            <svg class="w-10 h-10 text-amber-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path>
            </svg>
        </div>

        <!-- Main Heading -->
        <h2 class="text-4xl sm:text-5xl lg:text-6xl font-bold mb-8">
            <span class="bg-gradient-to-r from-white via-blue-100 to-amber-200 bg-clip-text text-transparent">
                Join Us
            </span>
            <br>
            <span class="text-white">in Person</span>
        </h2>

        <!-- Subtitle -->
        <p class="text-xl sm:text-2xl text-blue-100 mb-12 max-w-4xl mx-auto leading-relaxed">
            While we love having you join us online, nothing replaces the fellowship and community of worshiping together in person.
        </p>

        <!-- CTA Buttons -->
        <div class="flex flex-col sm:flex-row gap-6 justify-center">
            <a href="{% url 'core:plan_visit' %}" class="group inline-flex items-center bg-gradient-to-r from-amber-500 to-amber-600 hover:from-amber-600 hover:to-amber-700 text-white px-10 py-4 rounded-2xl font-semibold text-lg transition-all duration-300 transform hover:scale-105 shadow-xl hover:shadow-2xl">
                <svg class="w-6 h-6 mr-3 group-hover:animate-pulse" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                </svg>
                Plan Your Visit
            </a>
            <a href="{% url 'pages:location' %}" class="group inline-flex items-center bg-white/10 backdrop-blur-sm border-2 border-white/30 text-white hover:bg-white hover:text-gray-900 px-10 py-4 rounded-2xl font-semibold text-lg transition-all duration-300 transform hover:scale-105">
                <svg class="w-6 h-6 mr-3 group-hover:text-blue-600 transition-colors" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path>
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path>
                </svg>
                Get Directions
            </a>
        </div>
    </div>
</section>
<script>
  (function(){
    const btn = document.getElementById('fullscreenBtn');
    const container = document.getElementById('livePlayer');
    if(btn && container){
      btn.addEventListener('click', function(){
        if (!document.fullscreenElement) {
          if (container.requestFullscreen) container.requestFullscreen();
          else if (container.webkitRequestFullscreen) container.webkitRequestFullscreen();
          else if (container.msRequestFullscreen) container.msRequestFullscreen();
          btn.setAttribute('aria-label', 'Exit fullscreen');
        } else {
          if (document.exitFullscreen) document.exitFullscreen();
          else if (document.webkitExitFullscreen) document.webkitExitFullscreen();
          else if (document.msExitFullscreen) document.msExitFullscreen();
          btn.setAttribute('aria-label', 'Enter fullscreen');
        }
      });
    }
  })();
</script>
{% endblock %}

