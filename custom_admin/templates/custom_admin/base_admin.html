<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Admin Dashboard{% endblock %} - {{ SITE_NAME }}</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'primary-teal': '#0891b2',
                        'secondary-orange': '#0ea5e9',
                        'accent-yellow': '#f59e0b',
                        'text-dark': '#111827',
                        'text-secondary': '#374151',
                        'bg-soft': '#f8fafc',
                        'card-bg': '#ffffff'
                    },
                    fontFamily: {
                        'heading': ['Poppins', 'sans-serif'],
                        'body': ['Inter', 'sans-serif']
                    }
                }
            }
        }
    </script>
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        body { font-family: 'Inter', sans-serif; }
        .font-heading { font-family: 'Poppins', sans-serif; }
        
        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: var(--hover-bg);
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb {
            background: var(--primary);
            border-radius: 4px;
            border: 1px solid var(--background);
        }

        /* Enhanced Admin Color Scheme */
        :root {
            --primary: #0891b2;
            --primary-dark: #0e7490;
            --background: #f8fafc;
            --accent: #0ea5e9;
            --highlight: #f59e0b;
            --text-main: #111827;
            --text-secondary: #374151;
            --text-light: #6b7280;
            --card-bg: #ffffff;
            --border-color: #e5e7eb;
            --hover-bg: #f3f4f6;
            --success: #10b981;
            --warning: #f59e0b;
            --error: #ef4444;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: var(--primary-dark);
        }
        
        /* Sidebar animation */
        .sidebar-transition {
            transition: transform 0.3s ease-in-out;
        }
        
        /* Mobile menu overlay */
        .mobile-overlay {
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(4px);
        }
        
        /* Fix dropdown/select visibility */
        select {
            background-color: white !important;
            color: #374151 !important;
        }
        
        select option {
            background-color: white !important;
            color: #374151 !important;
            padding: 8px 12px;
        }
        
        select option:hover {
            background-color: #f3f4f6 !important;
            color: #111827 !important;
        }
        
        select option:checked {
            background-color: #007C91 !important;
            color: white !important;
        }

        /* Global form field visibility and focus styles */
        .main-content input[type="text"],
        .main-content input[type="email"],
        .main-content input[type="password"],
        .main-content input[type="url"],
        .main-content input[type="number"],
        .main-content input[type="datetime-local"],
        .main-content input[type="date"],
        .main-content input[type="time"],
        .main-content input[type="file"],
        .main-content textarea,
        .main-content select {
            background-color: #ffffff !important;
            color: #111827 !important; /* text-gray-900 */
            border: 1px solid #d1d5db !important; /* border-gray-300 */
            border-radius: 0.375rem; /* rounded-md */
            padding: 0.5rem 0.75rem; /* px-3 py-2 */
            width: 100%;
            box-sizing: border-box;
        }

        .main-content input::placeholder,
        .main-content textarea::placeholder {
            color: #9ca3af; /* placeholder-gray-400 */
        }

        .main-content input:focus,
        .main-content textarea:focus,
        .main-content select:focus {
            outline: none;
            border-color: #0891b2 !important; /* primary-teal */
            box-shadow: 0 0 0 2px rgba(8, 145, 178, 0.2);
        }

        /* Ensure checkboxes and radios are visible */
        .main-content input[type="checkbox"],
        .main-content input[type="radio"] {
            accent-color: #0891b2; /* primary-teal */
        }
    </style>
</head>
<body style="background-color: var(--background);">
    <!-- Mobile Menu Overlay -->
    <div id="mobile-overlay" class="fixed inset-0 z-40 mobile-overlay hidden lg:hidden"></div>
    
    <!-- Sidebar -->
    <aside id="sidebar" class="fixed inset-y-0 left-0 z-50 w-64 h-screen shadow-lg transform -translate-x-full lg:translate-x-0 sidebar-transition flex flex-col" style="background-color: var(--text-main);">
        <div class="flex items-center justify-between h-16 px-6 shrink-0" style="border-bottom: 1px solid rgba(255, 255, 255, 0.1);">
            <div class="flex items-center space-x-3">
                <div class="w-8 h-8 rounded-full flex items-center justify-center" style="background-color: var(--primary);">
                    <i class="fas fa-church text-white text-sm"></i>
                </div>
                <div>
                    <h1 class="text-lg font-heading font-bold text-white">{{ SITE_NAME }}</h1>
                    <p class="text-xs" style="color: rgba(255, 255, 255, 0.7);">Admin Panel</p>
                </div>
            </div>
            <button id="sidebar-close" class="lg:hidden p-2 rounded-md text-white hover:bg-gray-700">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <!-- Navigation -->
        <nav class="mt-6 px-3 flex-1 overflow-y-auto">
            <div class="space-y-1">
                <!-- Dashboard -->
                <a href="{% url 'custom_admin:dashboard' %}" class="flex items-center px-3 py-2 text-sm font-medium rounded-md {% if request.resolver_match.url_name == 'dashboard' %}text-white{% else %}text-gray-300 hover:text-white hover:bg-gray-700{% endif %}" {% if request.resolver_match.url_name == 'dashboard' %}style="background-color: var(--primary);"{% endif %}>
                    <i class="fas fa-tachometer-alt mr-3"></i>
                    Dashboard
                </a>

                <!-- Sermons -->
                <div class="space-y-1">
                    <div class="flex items-center px-3 py-2 text-sm font-medium uppercase tracking-wider" style="color: rgba(255, 255, 255, 0.5);">
                        <i class="fas fa-microphone mr-3"></i>
                        Sermons
                    </div>
                    <a href="{% url 'custom_admin:sermon_list' %}" class="flex items-center px-6 py-2 text-sm rounded-md {% if 'sermon' in request.resolver_match.url_name %}text-white{% else %}text-gray-300 hover:text-white hover:bg-gray-700{% endif %}" {% if 'sermon' in request.resolver_match.url_name %}style="background-color: var(--primary);"{% endif %}>
                        <i class="fas fa-list mr-3"></i>
                        All Sermons
                    </a>
                    <a href="{% url 'custom_admin:sermon_add' %}" class="flex items-center px-6 py-2 text-sm rounded-md text-gray-300 hover:text-white hover:bg-gray-700">
                        <i class="fas fa-plus mr-3"></i>
                        Add Sermon
                    </a>
                </div>

                <!-- Events -->
                <div class="space-y-1">
                    <div class="flex items-center px-3 py-2 text-sm font-medium uppercase tracking-wider" style="color: rgba(255, 255, 255, 0.5);">
                        <i class="fas fa-calendar mr-3"></i>
                        Events
                    </div>
                    <a href="{% url 'custom_admin:event_list' %}" class="flex items-center px-6 py-2 text-sm rounded-md {% if 'event' in request.resolver_match.url_name %}text-white{% else %}text-gray-300 hover:text-white hover:bg-gray-700{% endif %}" {% if 'event' in request.resolver_match.url_name %}style="background-color: var(--primary);"{% endif %}>
                        <i class="fas fa-list mr-3"></i>
                        All Events
                    </a>
                    <a href="{% url 'custom_admin:event_add' %}" class="flex items-center px-6 py-2 text-sm rounded-md text-gray-300 hover:text-white hover:bg-gray-700">
                        <i class="fas fa-plus mr-3"></i>
                        Add Event
                    </a>
                </div>

                <!-- Ministries -->
                <div class="space-y-1">
                    <div class="flex items-center px-3 py-2 text-sm font-medium uppercase tracking-wider" style="color: rgba(255, 255, 255, 0.5);">
                        <i class="fas fa-users mr-3"></i>
                        Ministries
                    </div>
                    <a href="{% url 'custom_admin:ministry_list' %}" class="flex items-center px-6 py-2 text-sm rounded-md {% if 'ministry' in request.resolver_match.url_name %}text-white{% else %}text-gray-300 hover:text-white hover:bg-gray-700{% endif %}" {% if 'ministry' in request.resolver_match.url_name %}style="background-color: var(--primary);"{% endif %}>
                        <i class="fas fa-list mr-3"></i>
                        All Ministries
                    </a>
                    <a href="{% url 'custom_admin:ministry_add' %}" class="flex items-center px-6 py-2 text-sm rounded-md text-gray-300 hover:text-white hover:bg-gray-700">
                        <i class="fas fa-plus mr-3"></i>
                        Add Ministry
                    </a>
                </div>

                <!-- Leadership -->
                <div class="space-y-1">
                    <div class="flex items-center px-3 py-2 text-sm font-medium uppercase tracking-wider" style="color: rgba(255, 255, 255, 0.5);">
                        <i class="fas fa-user-tie mr-3"></i>
                        Leadership
                    </div>
                    <a href="{% url 'custom_admin:leadership_list' %}" class="flex items-center px-6 py-2 text-sm rounded-md {% if 'leadership' in request.resolver_match.url_name %}text-white{% else %}text-gray-300 hover:text-white hover:bg-gray-700{% endif %}" {% if 'leadership' in request.resolver_match.url_name %}style="background-color: var(--primary);"{% endif %}>
                        <i class="fas fa-list mr-3"></i>
                        All Leaders
                    </a>
                    <a href="{% url 'custom_admin:leadership_add' %}" class="flex items-center px-6 py-2 text-sm rounded-md text-gray-300 hover:text-white hover:bg-gray-700">
                        <i class="fas fa-plus mr-3"></i>
                        Add Leader
                    </a>
                    <a href="/admin/pages/leadershipprofile/" class="flex items-center px-6 py-2 text-sm rounded-md text-gray-300 hover:text-white hover:bg-gray-700">
                        <i class="fas fa-cogs mr-3"></i>
                        Manage Positions
                    </a>
                </div>

                <!-- Live Streaming -->
                <div class="space-y-1">
                    <div class="flex items-center px-3 py-2 text-sm font-medium uppercase tracking-wider" style="color: rgba(255, 255, 255, 0.5);">
                        <i class="fas fa-broadcast-tower mr-3"></i>
                        Live Streaming
                    </div>
                    <a href="/my-admin/livestream/dashboard/" class="flex items-center px-6 py-2 text-sm rounded-md {% if 'livestream' in request.path and 'dashboard' in request.path %}text-white{% else %}text-gray-300 hover:text-white hover:bg-gray-700{% endif %}" {% if 'livestream' in request.path and 'dashboard' in request.path %}style="background-color: var(--primary);"{% endif %}>
                        <i class="fas fa-tachometer-alt mr-3"></i>
                        Dashboard
                    </a>
                    <a href="/my-admin/livestream/" class="flex items-center px-6 py-2 text-sm rounded-md {% if '/livestream/' in request.path and 'dashboard' not in request.path and 'platforms' not in request.path and 'add' not in request.path %}text-white{% else %}text-gray-300 hover:text-white hover:bg-gray-700{% endif %}" {% if '/livestream/' in request.path and 'dashboard' not in request.path and 'platforms' not in request.path and 'add' not in request.path %}style="background-color: var(--primary);"{% endif %}>
                        <i class="fas fa-video mr-3"></i>
                        All Streams
                    </a>
                    <a href="/my-admin/livestream/add/" class="flex items-center px-6 py-2 text-sm rounded-md {% if 'livestream/add' in request.path %}text-white{% else %}text-gray-300 hover:text-white hover:bg-gray-700{% endif %}" {% if 'livestream/add' in request.path %}style="background-color: var(--primary);"{% endif %}>
                        <i class="fas fa-plus mr-3"></i>
                        Schedule Stream
                    </a>
                    <a href="/my-admin/livestream/platforms/" class="flex items-center px-6 py-2 text-sm rounded-md {% if 'platforms' in request.path %}text-white{% else %}text-gray-300 hover:text-white hover:bg-gray-700{% endif %}" {% if 'platforms' in request.path %}style="background-color: var(--primary);"{% endif %}>
                        <i class="fas fa-share-alt mr-3"></i>
                        Platforms
                    </a>
                </div>
                
                <!-- Settings -->
                <a href="{% url 'custom_admin:settings' %}" class="flex items-center px-3 py-2 text-sm font-medium rounded-md {% if request.resolver_match.url_name == 'settings' %}bg-primary-teal text-white{% else %}text-gray-700 hover:bg-gray-100{% endif %}">
                    <i class="fas fa-cog mr-3"></i>
                    Site Settings
                </a>

                <!-- Service Times -->
                <a href="{% url 'custom_admin:service_time_list' %}" class="flex items-center px-3 py-2 text-sm font-medium rounded-md {% if 'service_time' in request.resolver_match.url_name %}bg-primary-teal text-white{% else %}text-gray-700 hover:bg-gray-100{% endif %}">
                    <i class="fas fa-clock mr-3"></i>
                    Service Times
                </a>
            </div>
        </nav>
        
        <!-- User Info -->
        <div class="p-4 border-t border-gray-200 shrink-0 bg-white/5">
            <div class="flex items-center space-x-3">
                <div class="w-8 h-8 bg-gray-300 rounded-full flex items-center justify-center">
                    <i class="fas fa-user text-gray-600 text-sm"></i>
                </div>
                <div class="flex-1 min-w-0">
                    <p class="text-sm font-medium text-gray-900 truncate">
                        {{ user.get_full_name|default:user.username }}
                    </p>
                    <p class="text-xs text-gray-500">Administrator</p>
                </div>
                <a href="{% url 'custom_admin:logout' %}" class="p-2 text-gray-400 hover:text-gray-600" title="Logout">
                    <i class="fas fa-sign-out-alt"></i>
                </a>
            </div>
        </div>
    </aside>
    
    <!-- Main Content -->
    <div class="lg:pl-64">
        <!-- Top Bar -->
        <header class="bg-white shadow-sm border-b border-gray-200">
            <div class="flex items-center justify-between h-16 px-6">
                <div class="flex items-center space-x-4">
                    <button id="sidebar-toggle" class="lg:hidden p-2 rounded-md text-gray-500 hover:text-gray-700">
                        <i class="fas fa-bars"></i>
                    </button>
                    <h2 class="text-xl font-heading font-semibold text-gray-900">
                        {% block page_title %}Dashboard{% endblock %}
                    </h2>
                </div>
                
                <div class="flex items-center space-x-4">
                    <a href="/" target="_blank" class="text-sm text-gray-500 hover:text-primary-teal">
                        <i class="fas fa-external-link-alt mr-1"></i>
                        View Site
                    </a>
                    <div class="text-sm text-gray-500">
                        {{ user.get_full_name|default:user.username }}
                    </div>
                </div>
            </div>
        </header>
        
        <!-- Page Content -->
        <main class="p-6 main-content">
            <!-- Messages -->
            {% if messages %}
                <div class="mb-6">
                    {% for message in messages %}
                        <div class="alert alert-{{ message.tags }} mb-4 p-4 rounded-lg border {% if message.tags == 'success' %}bg-green-50 border-green-200 text-green-800{% elif message.tags == 'error' %}bg-red-50 border-red-200 text-red-800{% elif message.tags == 'warning' %}bg-yellow-50 border-yellow-200 text-yellow-800{% else %}bg-blue-50 border-blue-200 text-blue-800{% endif %}">
                            <div class="flex items-center">
                                <i class="fas {% if message.tags == 'success' %}fa-check-circle{% elif message.tags == 'error' %}fa-exclamation-circle{% elif message.tags == 'warning' %}fa-exclamation-triangle{% else %}fa-info-circle{% endif %} mr-2"></i>
                                {{ message }}
                            </div>
                        </div>
                    {% endfor %}
                </div>
            {% endif %}
            
            {% block content %}{% endblock %}
        </main>
    </div>
    
    <!-- JavaScript -->
    <script>
        // Mobile sidebar toggle
        const sidebarToggle = document.getElementById('sidebar-toggle');
        const sidebarClose = document.getElementById('sidebar-close');
        const sidebar = document.getElementById('sidebar');
        const mobileOverlay = document.getElementById('mobile-overlay');
        
        function openSidebar() {
            sidebar.classList.remove('-translate-x-full');
            mobileOverlay.classList.remove('hidden');
        }
        
        function closeSidebar() {
            sidebar.classList.add('-translate-x-full');
            mobileOverlay.classList.add('hidden');
        }
        
        sidebarToggle?.addEventListener('click', openSidebar);
        sidebarClose?.addEventListener('click', closeSidebar);
        mobileOverlay?.addEventListener('click', closeSidebar);
        
        // Auto-hide messages after 5 seconds
        setTimeout(() => {
            const alerts = document.querySelectorAll('.alert');
            alerts.forEach(alert => {
                alert.style.transition = 'opacity 0.5s ease-out';
                alert.style.opacity = '0';
                setTimeout(() => alert.remove(), 500);
            });
        }, 5000);
    </script>
</body>
</html>
